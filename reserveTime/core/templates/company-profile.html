<!DOCTYPE html>
<html lang="en">
<head>
{% load static %}
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.1/css/all.min.css">
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/fontawesome.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/owl.theme.default.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/owl.carousel.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/reset.css' %}">
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link rel="stylesheet" href="{% static 'css/user-profile.css' %}">
    <link rel="stylesheet" href="{% static 'css/company-profile.css' %}">
    <link rel="stylesheet" href="{% static 'css/reserve-page.css' %}">
    <link rel="stylesheet" href="{% static 'css/responsive.css' %}">

    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
    <script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>

    <title>Company Profile</title>
    <style>
        @media (min-width: 992px){
            .modal-lg, .modal-xl {
                max-width: 60%;
            }
        }

        .custom-container{
            background-color: transparent;
        }

        .inner-container{
            background-color: #fff;
        }

        .red{
            color : red;
        }

        .black{
            color:black;
        }

    </style>
</head>


<body id="profile-body">
    
    <header>
        <div class="container custom-container header-container shadow">
            <div class="row justify-content-between">
                <div class="left side">
                    <a href="{% url 'core:home' %}">
                        <img src="{% static 'images/logo.png' %}" width="250px" alt="">
                    </a>
                </div>
                <div class="right side">
                    <div class="user-profile left-border">
                        <span> Hi, User <i class="fas fa-chevron-down" id="arrow-down"></i></span>
                        <div class="custom-drop-down shadow" style="display: none;">
                            <div class="triangle"></div>
                            <span>Hello, User</span>
                            <ul>
                                <li><a href="#">My Profile</a></li>
                                <li><a href="#">My Dining History</a></li>
                                <li><a href="#">My Saved Restaurants</a></li>
                                <li><a href="#">Sign out</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="reserve-table">
                        <button type="button" class="header-btn"><i class="far fa-calendar"></i></button>
                        <div class="custom-drop-down p-3" style="display: none;">
                            <div class="triangle"></div>
                            <span>Upcoming reservations</span>
                            <p class="pl-2 pr-2">You have no upcoming reservations</p>
                        </div>
                    </div>
                    <div class="notification">
                        <button type="button" class="header-btn"><i class="far fa-bell"></i></button>
                        <div class="custom-drop-down shadow p-3" style="display: none;">
                            <div class="triangle"></div>
                            <span>Notifications</span>
                            <p class="pl-2 pr-2">Nothing to see here, you’re all caught up!</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row" style="position: relative;">
                <div class="save-restaurant-btn align-center" >
                    {% if saved_restaurant.saved %}
                        <i class="fas fa-bookmark pr-2 red" id="saved-icon"></i>
                    {% else %}    
                        <i class="fas fa-bookmark pr-2 black" id="saved-icon"></i>
                    {% endif %}
                    
                    <form method="POST" action="{% url 'core:company-profile' company.pk %}" id="saveRestaurantForm">
                        {% csrf_token %}
                        <input type="submit" value="Save this restaurant">
                    </form>
                </div>
                <div id="custom-retaurant-carousel"  class="owl-carousel owl-theme card-list">
                    <div class="item">
                        <div class="inner p-relative">
                            <div class="overlay">
                            </div>
                            <img src="{% static 'images/img1.jpg' %}" alt="Owl Image">
                        </div>
                    </div>
                    <div class="item">
                        <div class="inner p-relative">
                            <div class="overlay">
                            </div>
                            <img src="{% static 'images/img2.jpg' %}" alt="Owl Image">
                        </div>
                    </div>
                    <div class="item">
                        <div class="inner p-relative">
                            <div class="overlay">
                            </div>
                            <img src="{% static 'images/img3.jpg' %}" alt="Owl Image">
                        </div>
                    </div>
                    <div class="item">
                        <div class="inner p-relative">
                            <div class="overlay">
                            </div>
                            <img src="{% static 'images/img4.jpg' %}" alt="Owl Image">
                        </div>  
                    </div>
                </div>
            </div>
        </div>
       
    </header>

    <main class="pt-5 mb-5">
        <div class="container custom-container main-container" >
            <div class="inner-container bg-white">
                <div class="row">
                    <div class="col-lg-8">
                        <div class="row menu-box">
                            <div class="menu">
                                <ul class="menu-list">
                                    <li><a href="#1">Overview</a></li>
                                    <li><a href="#2">Photos</a></li>
                                    <li><a href="#3">Menu</a></li>
                                    <li><a href="#4">Review</a></li>
                                </ul>
                            </div>
                        </div>
                        <div class="row overview" id="1">
                            <h1 class="company-name bold">{{company.company_name}}</h1>
                            <div style="display: none;" id="company_id">{{company.pk}}</div>
                            <div class="d-flex pl-3">
                                <div class="stars d-flex">
                                    <div class="star"><i class="fas fa-star"></i></div>
                                    <div class="star"><i class="fas fa-star"></i></div>
                                    <div class="star"><i class="fas fa-star"></i></div>
                                    <div class="star"><i class="fas fa-star"></i></div>
                                    <div class="star"><i class="fas fa-star"></i></div>
                                </div>
                                <p class="review-text mr-4 ml-4"><i class="far fa-comment"></i> 1875 reviews</p>
                                <p class="company-type"><i class="fas fa-utensils"></i> Global, International</p>
                            </div>
                            <p class="description p-3">
                                {{company.description}}
                            </p>
                        </div>
    
                        <div class="row go-to-reservation">
                            <h3 class="full pl-3 pb-3 bottom-border bold" >Go To Reservation</h3>
                            <p>If you find suitable table, you can pass to the reservation page. In this page you can choose foods and exact time for a meal.</p>
                            <button data-toggle="modal" data-target="#menuListModal" id = "menu-link" class="go-reserve-btn" style="display: none;"></button>
                            <div id="not-found-message"></div>
                            <div class="modal fade bd-example-modal-lg" id="menuListModal" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
                            <div class="modal-dialog modal-lg">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h3 class="full text-center bold">Menu List
                                           
                                        </h3>
                                    </div>
                                    <div class="modal-body">
                                        <form action="{% url 'core:company-profile' company.pk %}" method="POST" id="selectMenuForm">
                                            {% csrf_token %}
                                            <div class="choosen-menu-list mb-4">
                                                <div class="col-lg-9">
                                                    <div class="choosen-items-container shadow">
                                                        
                                                    </div>
                                                </div>
                                                <div class="col-lg-3">
                                                    <div class="complete-reserve-box shadow">
                                                        <div class="total-price-box mb-2" style="display: none;">
                                                            <span>Total : $</span>
                                                            <span class="total-price">34</span>
                                                        </div>
                                                        <input class="m-2 btn btn-success" type="submit" value="Complete Reserve">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="menu-section pb-5 mb-4 bottom-border">
                                                <div class="row menu-items">
                                                    {% for menu in menus %}
                                                        <div class="col-lg-6 position-relative">
                                                            <div class="menu-item-choose"><i class="far fa-check-circle saved-item-icon"></i></i></div>
                                                            <div class="menu-item menu-items-style">
                                                                <div class="menu-item-header">
                                                                    <span style="display: none;" class="menu-id">{{menu.pk}}</span>
                                                                    <div class="menu-title menu-title-get"><span>{{menu.title}}</span></div>
                                                                    <div class="menu-price menu-price-get"><span>{{menu.price}}</span></div>
                                                                </div>
                                                                <div class="menu-description">
                                                                    <p>{{menu.description}}</p>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    {% endfor %}
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4">
                        <div class="order-box">
                            <h4 class="bottom-border bold pb-2 text-center">Order delivery or pickup</h4>
                            <span class="bold">Pickup</span>
                            <div class="phone-number d-flex mt-2">
                                <i class="fas fa-phone-alt pr-2"></i> 
                                <p>xxx xxx xx xx</p>
                            </div>
                        </div>
                       
                        <div class="reserve-box">
                            <h4 class="bottom-border bold pb-2 text-center">Make a reservation</h4>
                            
                            <form action="{% url 'core:company-profile' company.pk %}" method='POST' id = "FindTableForm" name="FindTableForm" class="reserve-form">
                                {% csrf_token %}
                                <label for="party-size" >Party Size</label>
                                <select id="party-size" name="size">
                                    <optgroup label="Inside Tables">
                                        {% for size in inside_tables_sizes %}
                                            <option data-place='inside'  value="{{size}}">For {{size}}</option>
                                        {% endfor %}
                                    </optgroup>
                                    <optgroup label="Outside Tables"> 
                                        {% for size in outside_tables_sizes %}
                                            <option data-place='outside' value="{{size}}">For {{size}}</option>
                                        {% endfor %}
                                    </optgroup>
                                    
                                </select>
                                
                                <div class="d-flex mt-4 mb-4">
                                    <div class='full'>
                                        <label for="date">Date</label>
                                        <input type="date" id="reserve-date" name="trip-start" value="{{reserve_start_date | date:'Y-m-d'}}" min="{{reserve_start_date | date:'Y-m-d'}}" max="{{reserve_finish_date}}">
                                    </div>
                                </div>
                                <div class="d-flex mt-4 mb-4">
                                    <div class='full'>
                                        <label for="time">Time</label>
                                        <select id="reserve-time" name="time">
                                            {% for hour in work_hours %}
                                                <option value="{{hour | time:'H:i:s'}}">{{hour | time:'H:i'}}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                </div>
                                <input type="submit" value="Find Table" class="find-table-btn">
                            </form>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-8">
                        <div class="row photos pb-3" id="2">
                            <h3 class="full pl-3 pb-3 bottom-border">{{photos.count}} Photos</h3>
                            <div class="menu-box full mb-3">
                                <div class="photo-menu pl-3">
                                    <ul class="menu-list">
                                        <li><a href="#" data-type="all">All</a></li>
                                        <li><a href="#" data-type="food">Food</a></li>
                                        <li><a href="#" data-type="drink">Drink</a></li>
                                        <li><a href="#" data-type="interior">Interier</a></li>
                                        <li><a href="#" data-type="exterior">Exterier</a></li>
                                    </ul>
                                </div>
                            </div>
                            <div class="photo-gallery d-flex row row-cols-4 m-auto">
                                {% for photo in photos %}
                                    <div class="col mb-2 photo-box">
                                        <a data-fancybox="gallery" href="{{photo.photo.url}}"><img data-type="{{photo.photo_type}}" src="{{photo.photo.url}}"></a>
                                    </div>
                                {% endfor %}
                            </div>
                        </div>
                        <div class="row menu-section" id="3">
                            <div class="menu-container mb-3 collapse-menu">
                                <h3 class="full bottom-border pb-3 pl-3">Menu</h3>
                                <div class="row">
                                    {% for category in menu_categories %}
                                        <div class="menu-section pl-4 pr-4 mb-4 bottom-border">
                                            <div class="menu-section-header mb-4"><span>{{category}}</span></div>
                                            <div class="row menu-items">
                                                {% for menu in menus %}
                                                {% if menu.menu_type == category %}
                                                    <div class="col-6">
                                                        <div class="menu-item">
                                                            <div class="menu-item-header">
                                                                <div class="menu-title"><span>{{menu.title}} </span></div>
                                                                <div class="menu-price"><span>${{menu.price}} </span></div>
                                                            </div>
                                                            <div class="menu-description">
                                                                <p>{{menu.description}} </p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                {% endif %}
                                                {% endfor %}
                                            </div>
                                        </div>
                                    {% endfor %}
                                </div>
                            </div>
                            <button type="button" class="m-auto show-menu-btn">Show full menu</button>
                        </div>
                    </div>
                    <div class="col-lg-4">
                        <div class="row company-info-block">
                            <h3 class="full pl-3 pb-3 bottom-border">Company Information</h3>
                            <div class="col-6 d-flex">
                                <div class="icon-block">
                                    <i class="fas fa-road"></i>
                                </div>
                                <div class="info-text">
                                    <span>Cross street</span>
                                    <p>{% if company.province_location %}{{company.province_location}}{% else %} .... {% endif %}</p>
                                </div>
                            </div>
                            <div class="col-6 d-flex">
                                <div class="icon-block">
                                    <i class="far fa-building"></i>
                                </div>
                                <div class="info-text">
                                    <span>Neighborhood</span>
                                    <p>Chelsea</p>
                                </div>
                            </div>
                            <div class="col-6 d-flex">
                                <div class="icon-block">
                                    <i class="far fa-clock"></i>
                                </div>
                                <div class="info-text">
                                    <span>Hours of operation</span>
                                    <p>Mon–Sat {{company.work_hours_from}}-{{company.work_hours_to}} </p>
                                </div>
                            </div>
                            <div class="col-6 d-flex">
                                <div class="icon-block">
                                    <i class="fas fa-utensils"></i>
                                </div>
                                <div class="info-text">
                                    <span>Cuisines</span>
                                    <p>{% if company.cuisines %}{{company.cuisines}} {% else %} .... {% endif %} </p>
                                </div>
                            </div>
                            <div class="col-6 d-flex">
                                <div class="icon-block">
                                    <i class="fas fa-pizza-slice"></i>
                                </div>
                                <div class="info-text">
                                    <span>Dining Style</span>
                                    <p>{% if company.dining_style %}{{company.dining_style}} {% else %} .... {% endif %}</p>
                                </div>
                            </div>
                            <div class="col-6 d-flex">
                                <div class="icon-block">
                                    <i class="fas fa-parking"></i>
                                </div>
                                <div class="info-text">
                                    <span>Parking details</span>
                                    <p>{% if company.parking_details %}{{company.parking_details}}{% else %} .... {% endif %}</p>
                                </div>
                            </div>
                            <div class="col-6 d-flex">
                                <div class="icon-block">
                                    <i class="fas fa-bus"></i>
                                </div>
                                <div class="info-text">
                                    <span>Public transit</span>
                                    <p>{% if company.public_transit %}{{company.public_transit}}{% else %} .... {% endif %}</p>
                                </div>
                            </div>
                            <div class="col-6 d-flex">
                                <div class="icon-block">
                                    <i class="far fa-credit-card"></i>
                                </div>
                                <div class="info-text">
                                    <span>Payment options</span>
                                    <p>{% if company.payment_options %}{{company.payment_options}}{% else %} .... {% endif %}</p>
                                </div>
                            </div>
                            <div class="col-6 d-flex">
                                <div class="icon-block">
                                    <svg width="24px" height="24px" viewBox="0 0 24 24" version="1.1" style="background: rgb(255, 255, 255);"><title>icon/ic_chef</title><desc>Created with Sketch.</desc><defs></defs><g id="Symbols" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="icon/ic_chef" fill-rule="nonzero" fill="#333333"><g id="ic_chef" transform="translate(3.000000, 3.000000)"><g id="path0_stroke"><path d="M9,2 C10.74753,2 11.2909,2.52203 11.5663,2.90067 C11.7569,3.15266 11.8773,3.44336 12.0477,3.77663 C12.1995,4.07263 12.4802,4.60816 13.0528,4.89443 L13.9472,3.10557 C14.0198,3.14184 13.988,3.17737 13.8273,2.864 C13.6852,2.58789 13.4931,2.15984 13.1837,1.724328 C12.4591,0.72797 11.2525,0 9,0 L9,2 Z M13.0528,4.89443 C13.3931,5.05914 13.813,5.17853 14.1705,5.29042 C14.531,5.40297 14.8325,5.50244 15.1211,5.67628 C15.5714,5.93891 16,6.36421 16,7.5 L18,7.5 C18,5.63579 17.1786,4.56109 16.1289,3.94872 C15.6675,3.68506 15.1565,3.50328 14.767,3.38146 C14.3745,3.25897 14.1069,3.19086 13.9472,3.10557 L13.0528,4.89443 Z M16,7.5 C16,8.58594 15.4906,9.2061 14.8598,9.73178 C14.5267,10.01122 14.1517,10.26122 13.8286,10.52865 C13.5618,10.75096 13,11.2399 13,12 L15,12 C15,12.2601 14.8132,12.3115 15.1089,12.0651 C15.3483,11.8638 15.7233,11.6138 16.1402,11.2682 C17.0094,10.5439 18,9.41406 18,7.5 L16,7.5 Z M13.5793,16 L4.49999,16 L4.49999,18 L13.5793,18 L13.5793,16 Z M4.99999,12 C4.99999,11.2399 4.4382,10.75097 4.17142,10.52866 C3.84829,10.26122 3.47329,10.01122 3.14018,9.73178 C2.50937,9.20611 2,8.58594 2,7.5 L0,7.5 C0,9.41406 0.99061891,10.54389 1.859807,11.2682 C2.2767,11.6138 2.65169,11.8638 2.89105,12.0651 C3.18677,12.3115 2.99999,12.2601 2.99999,12 L4.99999,12 Z M2,7.5 C2,6.36421 2.42864,5.93891 2.87887,5.67628 C3.16747,5.50244 3.46898,5.40297 3.82952,5.29042 C4.18699,5.17853 4.6069,5.05914 4.94721,4.89443 L4.05279,3.10557 C3.8931,3.19086 3.62551,3.25897 3.23298,3.38146 C2.84352,3.50328 2.33253,3.68506 1.871129,3.94872 C0.821361,4.56109 0,5.63579 0,7.5 L2,7.5 Z M4.94721,4.89443 C5.51975,4.60816 5.80052,4.07263 5.95232,3.77663 C6.12265,3.44336 6.24309,3.15266 6.43374,2.90067 C6.70911,2.52203 7.25247,2 9,2 L9,0 C6.74753,0 5.54089,0.72797 4.81626,1.724328 C4.50691,2.15984 4.31485,2.58789 4.17268,2.864 C4.01198,3.17737 3.98025,3.14184 4.05279,3.10557 L4.94721,4.89443 Z M4.99999,16.5 L4.99999,13 L2.99999,13 L2.99999,16.5 L4.99999,16.5 Z M4.99999,13 L4.99999,12 L2.99999,12 L2.99999,13 L4.99999,13 Z M13,12 C13,12.5 13,12.75 13,12.875 C13,12.9375 13,12.9688 13,12.9844 C13,12.9922 13,12.9961 13,12.998 C13,12.999 13,12.9995 13,12.9998 C13,12.9999 13,12.9999 13,13 C13,13 13,13 13,13 C13,13 13,13 13,13 C13,13 13,13 13,13 C13,13 13,13 13,13 C13,13 14,13 14,13 C14,13 15,13 15,13 C15,13 15,13 15,13 C15,13 15,13 15,13 C15,13 15,13 15,13 C15,13 15,13 15,13 C15,12.9999 15,12.9999 15,12.9998 C15,12.9995 15,12.999 15,12.998 C15,12.9961 15,12.9922 15,12.9844 C15,12.9688 15,12.9375 15,12.875 C15,12.75 15,12.5 15,12 L13,12 Z M13.0002,13.0227 L13.0794,16.5113 L15.0789,16.466 L14.9997,12.9773 L13.0002,13.0227 Z M3.99999,14 L14,14 L14,12 L3.99999,12 L3.99999,14 Z M13.5793,18 C14.4211,18 15.098,17.3075 15.0789,16.466 L13.0794,16.5113 C13.0731,16.2308 13.2987,16 13.5793,16 L13.5793,18 Z M4.49999,16 C4.77613,16 4.99999,16.2239 4.99999,16.5 L2.99999,16.5 C2.99999,17.3284 3.67156,18 4.49999,18 L4.49999,16 Z"></path></g></g></g></g></svg>
                                </div>
                                <div class="info-text">
                                    <span>Executive chef</span>
                                    <p>{% if company.executive_chef %}{{company.executive_chef}}{% else %} .... {% endif %}</p>
                                </div>
                            </div>
                            <div class="col-6 d-flex">
                                <div class="icon-block">
                                    <i class="fas fa-external-link-alt"></i>
                                </div>
                                <div class="info-text">
                                    <span>Website</span>
                                    <p><a target="blank" href="{% if company.website %}{{company.website}}{% else %}#{% endif %}">{% if company.website %}{{company.website}}{% else %} .... {% endif %}</a></p>
                                </div>
                            </div>
                            <div class="col-6 d-flex">
                                <div class="icon-block">
                                    <i class="fas fa-phone-alt pr-2"></i>
                                </div>
                                <div class="info-text">
                                    <span>Phone number</span>
                                    <p>{% if company.phone_number %}{{company.phone_number}}{% else %} .... {% endif %}</p>
                                </div>
                            </div>
                            <div class="col-6 d-flex">
                                <div class="icon-block">
                                    <i class="far fa-file-alt"></i>
                                </div>
                                <div class="info-text">
                                    <span>Private party contact</span>
                                    <p>{% if company.private_party_contact %}{{company.private_party_contact}}{% else %} .... {% endif %}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
    
                <div class="row comments-section" id="4">
                    <h3 class="full bottom-border pb-3 pl-3">What 6016 people are saying</h3>
                    <div class="comment-sort">
                        <span>Sort By</span>
                    </div>
                    <!-- <div class="comment-filter">
                        <span>Filters</span>
                    </div> -->
                    <div class="comments-box inner-container">
                        {% for comment in comments %}
                            <div class="comment-item row">
                                <div class="col-3 comment-author">
                                    <div class="comment-author-profile-img">{{comment.user.first_name|capfirst|first}}{{comment.user.last_name|capfirst|first}}</div>
                                    <div class="username">{{comment.user.username}}</div>
                                    <div class="address">San Francisco</div>
                                    <div class="user-comments-count">
                                        <p class="review-text mr-4 ml-4"><i class="far fa-comment"></i> {% for user in users %}{% if user == comment.user %}{{user.user_comment.all.count}}{% endif %}{% endfor %} reviews</p>
                                    </div>
                                </div>
                                <div class="col-9">
                                    <div class="d-flex">
                                        <div class="stars d-flex">
                                            <div class="star"><i class="fas fa-star"></i></div>
                                            <div class="star"><i class="fas fa-star"></i></div>
                                            <div class="star"><i class="fas fa-star"></i></div>
                                            <div class="star"><i class="fas fa-star"></i></div>
                                            <div class="star"><i class="fas fa-star"></i></div>
                                        </div>
                                        <div class="posted-date pl-4">
                                            <p>Dined on {{comment.commented_at}}</p>
                                        </div>
                                    </div>
                                    <div class="post-body">
                                        <p>{{comment.text}}
                                        </p>
                                    </div>
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
        <div id="formInfos" style="display: none;">
            <div id="formTime"></div>
            <div id="formDate"></div>
            <div id="formTable"></div>
        </div>
    </main>
    

    <script src="{% static 'js/jquery-3.4.1.min.js' %}"></script>
    <script src="{% static 'js/bootstrap.min.js' %}"></script>
    <script src="{% static 'js/owl.carousel.min.js' %}"></script>
    <script src="{% static 'js/main.js' %}"></script>
    <script src="{% static 'js/reserve-page.js' %}"></script>


    <script>
        $('#FindTableForm').on('submit', function(e){
            e.preventDefault()
            
            $.ajax({
                type: "POST",
                url: $('#FindTableForm').attr('action'),
                data:  {
                    size : $('#party-size').val(),
                    table_place : $('#party-size option:selected').data('place'),
                    date :  $('#reserve-date').val(),
                    time : $('#reserve-time').val(),
                    csrfmiddlewaretoken:$('#FindTableForm').find('input[name=csrfmiddlewaretoken]').val(),
                    form_id : $('#FindTableForm').attr('id')
                },
                dataType: 'json',
                success: function (data) {
                    $('#message').html("<h2>Form posted</h2>")
                    if (data.found_result){
                        $('#menu-link').html(`${data.found_result.time}<i class="pl-2 fas fa-external-link-alt"></i>`).css({'display':'flex'})
                        $('#not-found-message').html('')
                    }else if(data.not_found){
                        $('#not-found-message').html(`<p>${data.not_found}</p>`)
                        $('#menu-link').css('display','none')
                    }
                    $('#formTime').text(data.found_result.time)
                    $('#formDate').text(data.found_result.reserved_date)
                    $('#formTable').text(data.found_result.table_id)
                },
                error: function(data) {
                    alert("error");
                    console.log(data);
                }
            });
        });

        $('#selectMenuForm').on('submit', function(e){
            e.preventDefault()  
            var menu_list = $('.choosen-items-container').children()
            var total_menu_list = []
            for (var i=0; i<menu_list.length; i++){
                var menu = menu_list[i]
                var menu_item = {
                    'menu_id' : parseInt($(menu).find('.menu-id').text()),
                    'portion_count' : parseInt($(menu).find('.porsion').text())
                }
                total_menu_list.push(menu_item)
            }
            console.log(total_menu_list);
            $.ajax({
                type: "POST",
                url: $('#selectMenuForm').attr('action'),
                data:  {
                    length : total_menu_list.length,    
                    selected_menus_list : total_menu_list,
                    total_price : parseInt($('.total-price').text()),
                    reserve_time : $('#formTime').text(),
                    reserve_date : $('#formDate').text().split(' ')[0],
                    table_id : parseInt($('#formTable').text()),
                    csrfmiddlewaretoken:$('#selectMenuForm').find('input[name=csrfmiddlewaretoken]').val(),
                    form_id : $('#selectMenuForm').attr('id')
                },
                dataType: 'json',
                success: function (data) {
                    $('#message-2').html("<h2>Form posted</h2>")
                    console.log(data);
                    window.location.replace("{% url 'core:home' %}");
                },
                error: function(data) {
                    alert("error");
                    console.log(data);
                }
            });
        });

        $('#saveRestaurantForm').on('submit', function(e){
            e.preventDefault()  
            
            $.ajax({
                type: "POST",
                url: $('#saveRestaurantForm').attr('action'),
                data:  {
                    csrfmiddlewaretoken:$('#saveRestaurantForm').find('input[name=csrfmiddlewaretoken]').val(),
                    form_id : $('#saveRestaurantForm').attr('id')
                },
                dataType: 'json',
                success: function (data) {
                    if(data.saved == 'true'){
                        $('#saved-icon').css('color','red')
                    }else if( data.saved == 'false'){
                        $('#saved-icon').css('color','black')
                    }
                    console.log(data);
                },
                error: function(data) {
                    alert("error");
                    console.log(data);
                }
            });
        });

       
    </script>

    <script>
        $(document).ready(function(){

            $('.header-btn').click(function(){
                $('.custom-drop-down').hide()
                $(this).siblings('.custom-drop-down').slideToggle()
            });

            $('.show-menu-btn').click(function(){
                $('.menu-container').toggleClass('collapse-menu')
                
                if ($(this).text() == 'Show full menu') {
                    $(this).text('Collapse Menu')
                }
                else{
                    $(this).text('Show full menu')
                }
            });
            $('.photos').find('.col.photo-box').css('display','block')
            $('.menu-list li a').click(function(e){
                e.preventDefault()
                $('.menu-list li').css('border-bottom','none')
                $(this).parent('li').css('border-bottom','2px solid red')
                $(this).parents('.photos').find('.col.photo-box').css('display','none')
                for(var i=0;i<$(this).parents('.photos').find('.photo-box img').data('type').length;i++){
                    if( $(this).data('type') == $(this).parents('.photos').find('.photo-box img').eq(i).data('type')){
                    $(this).parents('.photos').find('.col.photo-box').eq(i).css('display','block')
                
                }
                if( $(this).data('type') == 'all'){
                        $(this).parents('.photos').find('.col.photo-box').css('display','block')
                }   
                }
                

            })
        });
    </script>
</body>
</html>